# Use this docker file if headless_app.py and postprocessing_utils.py are updated.

FROM sensor-sim-trellis-base:1.0.11-withmodels

# Set environment variable before any Python code runs
ENV ATTN_BACKEND=xformers

WORKDIR /app

COPY headless_app.py /app/
COPY trellis/utils/postprocessing_utils.py /app/trellis/utils/

# No need to reinstall dependencies or run other setup steps

# The CMD from the base image will still apply, which runs verify_cuda.sh and then headless_app.py